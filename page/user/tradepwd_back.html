<!DOCTYPE html>
<html>
<head>
<title>找回交易密码 - e路同心手机官网</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="Expires" content="0">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-control" content="no-cache">
<meta charset="UTF-8">
<meta name="author" content="e路同心,88bank.com，深圳市同心科创金融服务有限公司" />
<meta name="keywords" content="e路同心，P2P理财平台，高收益，安全有保障，互联网金融">
<meta name="description" content="e路同心是总部位于深圳的一家国资背景互联网金融P2P理财平台，致力于为中小企业和个人投资者提供投融资信息中介服务。平台与优质小贷公司紧密合作，通过安全稳定的互联网平台实现跨区域资源配置的匹配与撮合，致力于为中小企业提供融资新渠道，并为个人提供创新型投资理财服务。">
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta content="telephone=no" name="format-detection" />
<link rel="Bookmark" href="../../favicon.ico">
<link rel="Shortcut Icon" href="../../favicon.ico" />
<link rel="stylesheet" type="text/css" href="../../css/main/global.css?v=20160318"/>
<link rel="stylesheet" type="text/css" href="../../css/main/public.css?v=20160322"/>
<link rel="stylesheet" type="text/css" href="../../css/iconfont/iconfont.css?v=20160311" />
<script type="text/javascript">
    var basePath = '../..';
</script>
</head> 
<body>
<div class="m-page pb-60 wp bgf4">
    <header class="g-header">
        <div class="baseh"></div>
    </header>
    <div class="g-mainer bgfff mgbase radius">
        <div class="text-c f-14 c-999 pt-20">绑定的手机号:<span class="f-16 c-333"><font id="phone">186 **** **41</font></span></div>
        <div class="m-mainer">
                <form class="m-form pt-20 pb-30 mgbase20" id="form1">
                    <input type="hidden" id="mobile" name="mobile" value="186 **** **41" />
                    <div class="formline formline2">
                        <i class="iconfont tticon">&#xe603;</i>
                        <input type="text" id="idcard" name="idcard" class="input-text size-L" placeholder="请输入18位身份证号"
                               onblur="checkIdcard()" autocomplete="off" maxlength="18">
                    </div>
                    <div class="formline formline2">
                        <i class="iconfont tticon">&#xe600;</i>
                        <input type="text" id="verifyCode" name="verifyCode" class="input-text size-L pr-code" placeholder="请输入短信验证码" maxlength="6" onblur="checkVerifyCode()" autocomplete="off">
                        <button type="button" class="btn btn-code size-L" id="getVerifyCode1">获取验证码</button>
                    </div>
                    <div class="formline formline2">
                        <i class="iconfont tticon">&#xe602;</i>
                        <input type="password" class="passwordhide"><!-- 防止浏览器记住密码 -->
                        <input type="password" id="password" name="password" class="input-text size-L pr1" placeholder="请输入平台新的交易密码" maxlength="20" onblur="checkPassword()" onkeyup="value=value.replace(/[\u4E00-\u9FA5]/g,'')">
                        <a href="javascript:changePwdType();" class="pwdeye c-999"><i class="iconfont">&#xe60e;</i></a>
                    </div>
                    <div id="info1" class="text-r mt-10 f-14"></div>
                    <!-- 语音 -->
                    <div class="ft w84 mt-20">
                        <p id="warn1" class="pb-10 f-14"></p><!-- 友情提示 -->
                        <p id="error1" class="pb-10 f-14"></p><!-- 错误提示 -->
                        <div class="formline">
                            <button type="button" id="submit" class="btn btn-orange size-XL btn-block" onclick="onSubmit()">提交</button>
                        </div>
                    </div>
                </form>
        </div>
    </div>
     <div class="g-extra baseh bgf4"></div>
<footer class="g-footer">
    <div class="m-footer clearfix">
         <a href="../index.html" id="nav_home"><i class="iconfont">&#xe619;</i><h2>首页</h2></a>
         <a href="../invest/invest_list.html" id="nav_tz"><i class="iconfont">&#xe618;</i><h2>投资</h2></a>
         <a href="../login.html" id="nav_user"><i class="iconfont">&#xe61a;</i><h2>账户</h2></a>
         <a href="../help/security.html" id="nav_help"><i class="iconfont">&#xe61b;</i><h2>帮助</h2></a>
    </div>
</footer>
</div>
<script type="text/javascript" src="../../lib/jquery.min.js?v=20160120"></script>
<script type="text/javascript" src="../../lib/layer/layer.m.js?v=20160120"></script>
<script type="text/javascript" src="../../js/public.js?v=20160120"></script><script type="text/javascript" src="../../js/idcheck.js"></script>
<script type="text/javascript" src="../../js/verifycode.js"></script>
<script type="text/javascript">
$(function(){
    $("#nav_user").addClass("on");
    $('#getVerifyCode1').click(function(){
        getVerifyCode('xgjymm_code',null,1);
    });
});
var isNullReg = /^[\s]{0,}$/;
function checkIdcard() {
    var _val = $("#idcard").val()
    $("#error1").html("");
    if (_val == "") {
        $("#error1").html('<span class="errortip">身份证号码不能为空</span>').show();
        return false;
    }
    if (!isIdCardNo(_val)) {
        $("#error1").html('<span class="errortip">请输入正确的身份证号码</span>').show();
        return false;
    }
    return true;
}
//短信验证码
function checkVerifyCode() {
    var _input = $("#verifyCode");
    var _val = _input.val();
    var _tips = $("#error1");
    var verifyCodeReg = /^[0-9]{6}$/;
    _tips.html('');
    if (_val == "") {
        _input.addClass("Validform_error");
        _tips.html('<span class="errortip">短信验证码不能为空</span>');
        return false;
    } else if (!verifyCodeReg.test(_val)) {
        _input.addClass("Validform_error");
        _tips.html('<span class="errortip">您输入6位有效验证码</span>');
        return false;
    }
    return true;
}
//密码
function checkPassword() {
    var th = $("input[name='password']");
    var p = $("#error1");
    var v = $.trim(th.val());
    p.html('');
    if (isNullReg.test(v)) {
        th.addClass("Validform_error");
        p.html('<span class="errortip">交易密码不能为空</span>');
        return false;
    } else if (v.length < 6 || v.length > 20) {
        th.addClass("Validform_error");
        p.html('<span class="errortip">6~20个字符，区分大小写</span>');
        return false;
    }
    chkPassword=true;
    p.html('<span class="successicon"></span>');
    return true;
}
//3. 点击眼睛改变密码可见状态
function changePwdType() {
    var _this = $("#password");
    var _type = _this.attr("type");
    var _change = (_type == "password") ? "text" : "password";
    _this.attr("type", _change);
}

function onSubmit() {
    if (checkIdcard()&&checkVerifyCode()&&checkPassword()) {
        var pwd=$("#password").val();
        var code=$("#verifyCode").val();
        $.ajax({
            url: "../../accountmgr/trapwd/back/action",
            type: 'POST',
            data: {"verifyCode":code,"password":pwd,"idcard":$('#idcard').val()},
            dataType: 'json',
            cache: false,
            async: true,
            success: function (data) {
                var result = $.parseJSON(data);
                if (result.success) {
                    successTip();
                } else {
                    $("#error1").html('<span class="errortip">'+result.msg+'</span>');
                }
            }
        });
    }
}
//投资成功提示
function successTip(){
    layer.open({
        content: '<i class="iconfont mr-5" style="font-size:20px">&#xe60f;</i>操作成功',
        shadeClose:false,
        style: 'background-color:#fff;color:#ff7610; border:none;font-size:16px',
        success: function(elem){
            setTimeout(function(){
                window.location="../login.html";
            },1000); 
        }  
    });
}
</script>
</body>
</html>